{"title":"Entity Frameworkå¸¸ç”¨æ“ä½œ","uid":"0adec41aad666bb9dbc2e935ddaf42e9","slug":"Entity Frameworkå¸¸ç”¨æ“ä½œ","date":"2025-07-29T09:26:07.000Z","updated":"2025-07-29T09:59:35.878Z","comments":true,"path":"api/articles/Entity Frameworkå¸¸ç”¨æ“ä½œ.json","keywords":null,"cover":null,"content":"<h1 id=\"ä¸€ã€åŸºç¡€æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰\"><a href=\"#ä¸€ã€åŸºç¡€æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰\" class=\"headerlink\" title=\"ä¸€ã€åŸºç¡€æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰\"></a>ä¸€ã€åŸºç¡€æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</h1><p>â–¶ <strong>æ·»åŠ æ•°æ®ï¼ˆCreateï¼‰</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DB context = <span class=\"keyword\">new</span> DB()</span><br><span class=\"line\">User user = <span class=\"keyword\">new</span> User &#123;Name = <span class=\"string\">&quot;Felix Still&quot;</span>,Age = <span class=\"number\">20</span>&#125;;</span><br><span class=\"line\">context.Users.Add(user);</span><br><span class=\"line\">context.SaveChanges();</span><br></pre></td></tr></table></figure>\n\n<p>â–¶ <strong>æŸ¥è¯¢æ•°æ®ï¼ˆReadï¼‰</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Query all data.</span></span><br><span class=\"line\">User user = context.Users.ToList&lt;User&gt;(); || <span class=\"keyword\">var</span> user = context.Users.ToList();</span><br><span class=\"line\"><span class=\"comment\">// Conditional query.</span></span><br><span class=\"line\">User user = context.Users.FirstOrDefault&lt;User&gt;(u =&gt; u.id == <span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"comment\">// Fuzzy matching</span></span><br><span class=\"line\">List&lt;User&gt; userList = context.Users.Where(u =&gt; u.Name.Contains(<span class=\"string\">&quot;Felix&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<p>â–¶ <strong>ä¿®æ”¹æ•°æ®ï¼ˆUpdateï¼‰</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User user = context.Users.FirstOrDefault&lt;User&gt;(u =&gt; u.id == <span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span>(user == <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">\tMessageBox.Show(<span class=\"string\">$&quot;error info:<span class=\"subst\">&#123;user.id&#125;</span>çš„ç”¨æˆ·ä¸å­˜åœ¨&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">user.Name = <span class=\"string\">&quot;Raymond&quot;</span>;</span><br><span class=\"line\">\tcontext.SaveChanges();</span><br></pre></td></tr></table></figure>\n\n<p>â–¶ <strong>åˆ é™¤æ•°æ®ï¼ˆDeleteï¼‰</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User user = context.Users.FirstOrDefault&lt;User&gt;(u =&gt; u.id == <span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span>(user != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">\tcontext.Users.<span class=\"keyword\">remove</span>(user);</span><br><span class=\"line\">\tcontext.SaveChanges();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"äºŒã€åˆ†é¡µã€æ’åºã€æŠ•å½±\"><a href=\"#äºŒã€åˆ†é¡µã€æ’åºã€æŠ•å½±\" class=\"headerlink\" title=\"äºŒã€åˆ†é¡µã€æ’åºã€æŠ•å½±\"></a>äºŒã€åˆ†é¡µã€æ’åºã€æŠ•å½±</h1><p>â–¶ <strong>åˆ†é¡µæŸ¥è¯¢ï¼ˆSkip + Takeï¼‰</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span> pageSize = <span class=\"number\">10</span>, pageIndex = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> pageData= context.Users.OrderBy(u =&gt; u.id)</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t\t\t\t\t.Skip((pageIndex - <span class=\"number\">1</span>)*pageSize)</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t\t\t\t\t.Take(pageSize)</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t\t\t\t\t.ToList();</span><br></pre></td></tr></table></figure>\n\n<p>â–¶ <strong>æŠ•å½±ï¼ˆSelectï¼‰</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> result = context.Users.Select(u =&gt; <span class=\"keyword\">new</span> &#123;user_id=u.id,username=u.name&#125;);</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"ä¸‰ã€äº‹åŠ¡å¤„ç†\"><a href=\"#ä¸‰ã€äº‹åŠ¡å¤„ç†\" class=\"headerlink\" title=\"ä¸‰ã€äº‹åŠ¡å¤„ç†\"></a>ä¸‰ã€äº‹åŠ¡å¤„ç†</h1><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> (<span class=\"keyword\">var</span> transaction = context.Database.BeginTransaction())</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ä¸šåŠ¡é€»è¾‘</span></span><br><span class=\"line\">        context.SaveChanges();</span><br><span class=\"line\">        transaction.Commit();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">catch</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        transaction.Rollback();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","text":"ä¸€ã€åŸºç¡€æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰â–¶ æ·»åŠ æ•°æ®ï¼ˆCreateï¼‰ 1234DB context = new DB()User user = new User {Name =...","permalink":"/post/Entity Frameworkå¸¸ç”¨æ“ä½œ","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"Entity Framework","slug":"Entity-Framework","count":3,"path":"api/tags/Entity-Framework.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C%EF%BC%88%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%EF%BC%89\"><span class=\"toc-text\">ä¸€ã€åŸºç¡€æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81%E5%88%86%E9%A1%B5%E3%80%81%E6%8E%92%E5%BA%8F%E3%80%81%E6%8A%95%E5%BD%B1\"><span class=\"toc-text\">äºŒã€åˆ†é¡µã€æ’åºã€æŠ•å½±</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86\"><span class=\"toc-text\">ä¸‰ã€äº‹åŠ¡å¤„ç†</span></a></li></ol>","author":{"name":"Felix Still","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"Documenting my journey in Android native and WinForms development. Tutorials, experiments, and practical coding experiences.","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"DataGridViewå¸¸ç”¨æ“ä½œ","uid":"cc26a2e6e1a0489e6526665c276705dd","slug":"DataGridViewå¸¸ç”¨æ“ä½œ","date":"2025-07-29T09:26:07.000Z","updated":"2025-07-29T09:30:18.760Z","comments":true,"path":"api/articles/DataGridViewå¸¸ç”¨æ“ä½œ.json","keywords":null,"cover":null,"text":"ä¸€ã€åŠ¨æ€æ·»åŠ åˆ— å‰ç½®å‡†å¤‡ï¼šæ¸…ç©ºæ—§åˆ—ï¼ˆå¯é€‰ï¼‰ 1datagridview1.Columns.Clear(); åŠ¨æ€æ·»åŠ å„ç§åˆ— æ·»åŠ æ–‡æœ¬åˆ—ï¼ˆDataGridView...","permalink":"/post/DataGridViewå¸¸ç”¨æ“ä½œ","photos":[],"count_time":{"symbolsCount":"5.1k","symbolsTime":"5 mins."},"categories":[],"tags":[{"name":"Winform","slug":"Winform","count":1,"path":"api/tags/Winform.json"}],"author":{"name":"Felix Still","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"Documenting my journey in Android native and WinForms development. Tutorials, experiments, and practical coding experiences.","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"å›¾ç‰‡ä¸Šä¼ æ§ä»¶","uid":"4f746ee5321e2060cb95a81153a748fa","slug":"å›¾ç‰‡ä¸Šä¼ æ§ä»¶","date":"2025-07-29T09:26:07.000Z","updated":"2025-07-29T09:59:48.335Z","comments":true,"path":"api/articles/å›¾ç‰‡ä¸Šä¼ æ§ä»¶.json","keywords":null,"cover":null,"text":"âœ… ä¸€ã€ä½¿ç”¨æ§ä»¶ç»„åˆå®ç°å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ğŸ’¡ å¸¸ç”¨æ§ä»¶ï¼š PictureBoxï¼šç”¨äºå±•ç¤ºå›¾ç‰‡ Buttonï¼šç‚¹å‡»ä¸Šä¼  OpenFileDialogï¼šé€‰æ‹©å›¾ç‰‡æ–‡ä»¶ ğŸ”§ ...","permalink":"/post/å›¾ç‰‡ä¸Šä¼ æ§ä»¶","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"Entity Framework","slug":"Entity-Framework","count":3,"path":"api/tags/Entity-Framework.json"}],"author":{"name":"Felix Still","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"Documenting my journey in Android native and WinForms development. Tutorials, experiments, and practical coding experiences.","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}